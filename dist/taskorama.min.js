!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("taskorama",[],t):"object"==typeof exports?exports.taskorama=t():n.taskorama=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=n,t.c=r,t.i=function(n){return n},t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=1)}([function(n,t){"use strict";function r(n){return Object.freeze({isTask:!0,fork:o(n),run:function(t){return n(t,console.error)},map:u,ap:c,chain:e,flatMap:e})}function e(n){var t=this,e=r(function(r,e){var u=void 0,c=t.fork(e,function(t){try{var c=n(t),o=c.fork(e,r);return u=o.cancel,{cancel:o.cancel}}catch(n){e(n)}}),o=function(){u&&u(),c.cancel()};return{cancel:o}});return e}function u(n){var t=this,e=r(function(r,e){var u=t.fork(e,function(t){try{var u=n(t);r(u)}catch(n){e(n)}});return u});return e}function c(n){var t=this,e=r(function(r,e){var u=t.fork(e,function(t){try{n.fork(e,function(n){try{var u=n(t);r(u)}catch(n){e(n)}})}catch(n){e(n)}});return u});return e}function o(n){return function(t,r){return n(r,t)}}function f(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.of=function(n){return r(function(t,r){t(n);var e=f;return{cancel:e}})},r.reject=function(n){return r(function(t,r){r(n);var e=f;return{cancel:e}})},r.resolve=r.of,r.all=function(n){return r(function(t,r){var e=n.length,u={},c=[],o=function(n){return function(r){u["t-"+n]=r;var o=c.filter(function(n){return!!u[n]}).length;if(o===e){var f=c.map(function(n){return u[n]});t(f)}}},f=function(n){return function(t){a(n),r(t)}},i=n.map(function(n,t){return u["t-"+t]=void 0,c=Object.keys(u),n.fork(f(t),o(t))}),a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?i.forEach(function(n){return n.cancel()}):i.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:a}})},r.race=function(n){return r(function(t,r){var e=function(n){return function(r){o(n),t(r)}},u=function(n){return function(t){o(n),r(t)}},c=n.map(function(n,t){return n.fork(u(t),e(t))}),o=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?c.forEach(function(n){return n.cancel()}):c.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:o}})},r.fromPromise=function(n){return r(function(t,r){n.then(t,r);var e=function(){return console.warn("A promise is not cancellable.")};return{cancel:e}})},r.wait=function(n,t){return r(function(r,e){var u=setTimeout(function(n){return r(t)},n),c=function(){return clearTimeout(u)};return{cancel:c}})}},function(n,t,r){n.exports=r(0)}])});