!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("taskorama",[],t):"object"==typeof exports?exports.taskorama=t():n.taskorama=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var u=r[e]={i:e,l:!1,exports:{}};return n[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=n,t.c=r,t.i=function(n){return n},t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=2)}([function(n,t){"use strict";function r(n){return Object.freeze({_isTask:!0,map:u,ap:c,chain:e,flatMap:e,then:o,fork:f(n),run:function(t){return n(t,console.error)}})}function e(n){var t=this,e=r(function(e,u){var c=void 0,o=t.fork(u,function(t){try{var o=n(t)||r.of(void 0),f=o.fork(u,e);return c=f.cancel,{cancel:f.cancel}}catch(n){u(n)}}),f=function(){c&&c(),o.cancel()};return{cancel:f}});return e}function u(n){var t=this,e=r(function(r,e){var u=t.fork(e,function(t){try{var u=n(t);r(u)}catch(n){e(n)}});return u});return e}function c(n){var t=this,e=r(function(r,e){var u=t.fork(e,function(t){try{n.fork(e,function(n){try{var u=n(t);r(u)}catch(n){e(n)}})}catch(n){e(n)}});return u});return e}function o(n){var t=this,e=r(function(e,u){var c=void 0,o=t.fork(u,function(t){try{var o=n(t)||r.of(void 0),f=void 0;f=o._isTask?o:r.of(o);var i=f.fork(u,e);return c=i.cancel,{cancel:i.cancel}}catch(n){u(n)}}),f=function(){c&&c(),o.cancel()};return{cancel:f}});return e}function f(n){return function(t,r){return n(r,t)}}function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.of=function(n){return n._isTask?n:r(function(t,r){return t(n),{cancel:i}})},r.reject=function(n){return r(function(t,r){return r(n),{cancel:i}})},r.resolve=r.of,r.all=function(n){return r(function(t,r){var e=n.length,u={},c=[],o=function(n){return function(r){u["t-"+n]=r;var o=c.filter(function(n){return!!u[n]}).length;if(o===e){var f=c.map(function(n){return u[n]});t(f)}}},f=function(n){return function(t){a(n),r(t)}},i=n.map(function(n,t){return u["t-"+t]=void 0,c=Object.keys(u),n.fork(f(t),o(t))}),a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?i.forEach(function(n){return n.cancel()}):i.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:a}})},r.race=function(n){return r(function(t,r){var e=function(n){return function(r){o(n),t(r)}},u=function(n){return function(t){o(n),r(t)}},c=n.map(function(n,t){return n.fork(u(t),e(t))}),o=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?c.forEach(function(n){return n.cancel()}):c.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:o}})},r.fromPromise=function(n){return r(function(t,r){return n.then(t,r),{cancel:function(){return console.warn("A promise is not cancellable.")}}})},r.wait=function(n,t){return r(function(r,e){var u=setTimeout(function(n){return r(t)},n);return{cancel:function(){return clearTimeout(u)}}})}},function(n,t,r){"use strict";function e(n){return n&&n.__esModule?n:{default:n}}var u=r(0),c=e(u);c.default.fetch=function(n){return(0,c.default)(function(t,r){var e=new XMLHttpRequest;e.open("get",n,!0),e.onerror=r,e.onreadystatechange=function(){var u;4==e.readyState&&(u=e.status,200==u?t({json:function(){return JSON.parse(e.responseText)},text:function(){return e.responseText},xhr:e,status:u,url:n}):r(u))},e.send();var u=function(){return e.abort()};return{cancel:u}})}},function(n,t,r){n.exports=r(1)}])});