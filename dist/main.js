!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("taskorama",[],t):"object"==typeof exports?exports.taskorama=t():n.taskorama=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var c=r[e]={i:e,l:!1,exports:{}};return n[e].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var r={};return t.m=n,t.c=r,t.i=function(n){return n},t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=3)}([function(n,t,r){"use strict";function e(n){return Object.freeze({_isTask:!0,map:o,ap:u,chain:c,flatMap:c,then:f,fork:i(n),run:function(t){return n(t,console.error)}})}function c(n){var t=this,r=e(function(r,c){var o=void 0,u=t.fork(c,function(t){try{var u=n(t)||e.of(void 0),f=u.fork(c,r);return o=f.cancel,{cancel:f.cancel}}catch(n){c(n)}}),f=function(){o&&o(),u.cancel()};return{cancel:f}});return r}function o(n){var t=this,r=e(function(r,e){var c=t.fork(e,function(t){try{var c=n(t);r(c)}catch(n){e(n)}});return c});return r}function u(n){var t=this,r=e(function(r,e){var c=t.fork(e,function(t){try{n.fork(e,function(n){try{var c=n(t);r(c)}catch(n){e(n)}})}catch(n){e(n)}});return c});return r}function f(n){var t=this,r=e(function(r,c){var o=void 0,u=t.fork(c,function(t){try{var u=n(t)||e.of(void 0),f=void 0;f=u._isTask?u:e.of(u);var i=f.fork(c,r);return o=i.cancel,{cancel:i.cancel}}catch(n){c(n)}}),f=function(){o&&o(),u.cancel()};return{cancel:f}});return r}function i(n){return function(t,r){return n(r,t)}}function a(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=e,e.of=function(n){return n._isTask?n:e(function(t,r){return t(n),{cancel:a}})},e.reject=function(n){return e(function(t,r){return r(n),{cancel:a}})},e.resolve=e.of,e.all=function(n){return e(function(t,r){var e=n.length,c={},o=[],u=function(n){return function(r){c["t-"+n]=r;var u=o.filter(function(n){return!!c[n]}).length;if(u===e){var f=o.map(function(n){return c[n]});t(f)}}},f=function(n){return function(t){a(n),r(t)}},i=n.map(function(n,t){return c["t-"+t]=void 0,o=Object.keys(c),n.fork(f(t),u(t))}),a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?i.forEach(function(n){return n.cancel()}):i.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:a}})},e.race=function(n){return e(function(t,r){var e=function(n){return function(r){u(n),t(r)}},c=function(n){return function(t){u(n),r(t)}},o=n.map(function(n,t){return n.fork(c(t),e(t))}),u=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===n?o.forEach(function(n){return n.cancel()}):o.filter(function(t,r){return r!==n}).forEach(function(n){return n.cancel()})};return{cancel:u}})},e.fromPromise=function(n){return e(function(t,r){return n.then(t,r),{cancel:function(){return console.warn("A promise is not cancellable.")}}})},e.wait=function(n,t){return e(function(r,e){var c=setTimeout(function(n){return r(t)},n);return{cancel:function(){return clearTimeout(c)}}})}},,,function(n,t,r){n.exports=r(0)}])});